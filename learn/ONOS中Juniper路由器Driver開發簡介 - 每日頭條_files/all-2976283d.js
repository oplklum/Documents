!function(e){"use strict";function t(e){function n(e,t){var n=0,o=e.length;for(n=0;o>n;n++)t(n,e[n])}function o(e,t,o){if(o="boolean"==typeof o?o:l.async,e.length){var i=e.slice();n(i,function(e,n){"object"==typeof n&&i.hasOwnProperty(e)&&(o?setTimeout(function(){n.callback.apply(n.object,t)},4):n.callback.apply(n.object,t))})}}function i(e,t){var n;for(n in e)"_"!==n[0]&&e.hasOwnProperty(n)&&o(e[n]._events,t)}function r(e,t,n,a){n=n.slice();var c=n.shift(),s=a.depth,l=a.async,u=a.partsLength,d=a.recurrent,f=u-n.length-1;return c?("undefined"!=typeof e["*"]&&r(e["*"],t,n,a),"*"===c&&i(e,t,l),"undefined"==typeof e[c]?void a.log:(e=e[c],d===!0&&"number"!=typeof s?o(e._events,t,l):d===!0&&"number"==typeof s&&f>=u-s&&o(e._events,t,l),void r(e,t,n,a))):void o(e._events,t,l)}function a(e,t,n){var o,i=e.split(l.separator),r=n?!0:!1,a=null,c=0;for(n=r?n:t,o=s,c=0;c<i.length;c+=1)"undefined"==typeof o[i[c]]&&(o[i[c]]={},o[i[c]]._events=[]),o=o[i[c]];return a={callback:t,object:n},o._events.push(a),{namespace:i.join(l.separator),event:a}}function c(e){if(null===e||"undefined"==typeof e)return null;var t,o=e.namespace,i=e.event,r=o.split(l.separator),a=0;for(t=s,a=0;a<r.length;a+=1){if("undefined"==typeof t[r[a]])return l.log,null;t=t[r[a]]}n(t._events,function(e){t._events[e]===i&&t._events.splice(e,1)})}var s={},l={separator:e&&e.separator?e.separator:".",recurrent:e&&"boolean"==typeof e.recurrent?e.recurrent:!1,async:e&&"boolean"==typeof e.async?e.async:!1,log:e&&e.log?e.log:!1};return{publish:function(e,t,n){var o=e.split(l.separator),i="object"==typeof n&&n.recurrent?n.recurrent:l.recurrent,a="object"==typeof n&&n.depth?n.depth:null,c="object"==typeof n&&n.async?n.async:l.async,u=o.length;return o.length?void r(s,t,o,{recurrent:i,depth:a,async:c,parts:o,nsString:e,partsLength:u}):void l.log},subscribe:function(e,t,o){var i=this,r=o&&"undefined"!=typeof o.context?o.context:null,c=[];if("object"==typeof t&&t instanceof Array)n(t,function(n){var o=t[n];c=c.concat(i.subscribe.apply(i,[e,o,r]))});else{if(!("object"==typeof e&&e instanceof Array))return a.apply(i,arguments);n(e,function(n){var o=e[n];c=c.concat(i.subscribe.apply(i,[o,t,r]))})}return c},subscribeOnce:function(e,t,n){var o=this,i=n&&"undefined"!=typeof n.context?n.context:null,r=null,a=function(){t.apply(this,arguments),o.unsubscribe(r)};return r=o.subscribe.apply(o,[e,a,i])},unsubscribe:function(e){var t=this;e instanceof Array?n(e,function(n){var o=e[n];c.apply(t,[o])}):c.apply(t,arguments)},newInstance:function(e){return new t(e)}}}var n=null,o=null;"object"==typeof pubsub?o=pubsub:"object"==typeof global&&"object"==typeof global.pubsubConfig&&(o=global.pubsubConfig),n=new t(o),"function"==typeof define&&define("lib/pubsub",n),"object"==typeof module&&module.exports&&(module.exports=n),"object"==typeof window&&(window.pubsub=n,window!==e&&(e.pubsub=n))}(this),define("lib/tracking",["jquery","underscore","lib/pubsub"],function(e,t,n){var o=document,i=window,r=i.location;return function(){var a=PAGEVARS;t.has(a,"pageId")&&ga("set","contentGroup1",a.pageId),t.has(a,"story")&&(t.has(a.story,"title")&&ga("set","title",a.story.title),t.has(a.story,"category")&&ga("set","contentGroup2",a.story.category)),t.has(i,"adblocked")&&!i.adblocked?ga("set","dimension1","adsEnabled"):ga("set","dimension1","adsDisabled"),t.has(a,"abtest")&&a.abtest&&ga("set","dimension2",a.abtest),t.has(a,"campaign")&&t.isObject(a.campaign)&&t.each(a.campaign,function(e,t){ga("set","campaign"+t.replace(/^./,function(e){return e.toUpperCase()}),e)}),ga("send","pageview");var c=function(e,t){for(;e&&t--;){if("ins"==e.tagName.toLowerCase()&&"adsbygoogle"==e.className)return e;e=e.parentNode}};setInterval(function(e,t,n){e=o.activeElement,t="data-clicked",e&&"iframe"==e.tagName.toLowerCase()&&(n=c(e,5),n&&!n.hasAttribute(t)&&(void 0!==i.fbq&&fbq("trackCustom","GoldenClick"),void 0!==i.ga,n.setAttribute(t,"yes"),(new Image).src="/adclk"))},600);e(o.body).on("click","[data-ga]",function(){var t=e(this).data("ga");t&&(t=t.split("/",3),ga("send","event",t[0],t[1],t[2]))}),n.subscribe("page.like",function(){ga("send","event","Page","Like",r.href)}),n.subscribe("page.unlike",function(){ga("send","event","Page","UnLike",r.href)})}}),function(e){"function"==typeof define&&define.amd?define("lib/jquery.lazyload",["jquery"],e):e(jQuery)}(function(e){var t=e(window);e.fn.lazyload=function(n){function o(){var t=0;r.each(function(){var n=e(this);if(!a.skip_invisible||n.is(":visible"))if(e.abovethetop(this,a)||e.leftofbegin(this,a));else if(e.belowthefold(this,a)||e.rightoffold(this,a)){if(++t>a.failure_limit)return!1}else n.trigger("appear"),t=0})}var i,r=this,a={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:window,data_attribute:"src",skip_invisible:!1,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return n&&(void 0!==n.failurelimit&&(n.failure_limit=n.failurelimit,delete n.failurelimit),void 0!==n.effectspeed&&(n.effect_speed=n.effectspeed,delete n.effectspeed),e.extend(a,n)),i=void 0===a.container||a.container===window?t:e(a.container),0===a.event.indexOf("scroll")&&i.on(a.event,function(){return o()}),this.each(function(){var t=this,n=e(t);t.loaded=!1,(void 0===n.attr("src")||n.attr("src")===!1)&&n.is("img")&&n.attr("src",a.placeholder),n.one("appear",function(){if(!this.loaded){if(a.appear){var o=r.length;a.appear.call(t,o,a)}e("<img />").one("load",function(){var o=n.attr("data-"+a.data_attribute);n.is("img")?n.attr("src",o):n.css("background-image","url('"+o+"')"),t.loaded=!0;var i=e.grep(r,function(e){return!e.loaded});if(r=e(i),a.load){var c=r.length;a.load.call(t,c,a)}}).attr("src",n.attr("data-"+a.data_attribute))}}),0!==a.event.indexOf("scroll")&&n.on(a.event,function(){t.loaded||n.trigger("appear")})}),t.on("resize",function(){o()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&t.on("pageshow",function(t){t.originalEvent&&t.originalEvent.persisted&&r.each(function(){e(this).trigger("appear")})}),e(document).ready(function(){o()}),this},e.belowthefold=function(n,o){var i;return i=void 0===o.container||o.container===window?(window.innerHeight?window.innerHeight:t.height())+t.scrollTop():e(o.container).offset().top+e(o.container).height(),i<=e(n).offset().top-o.threshold},e.rightoffold=function(n,o){var i;return i=void 0===o.container||o.container===window?t.width()+t.scrollLeft():e(o.container).offset().left+e(o.container).width(),i<=e(n).offset().left-o.threshold},e.abovethetop=function(n,o){var i;return i=void 0===o.container||o.container===window?t.scrollTop():e(o.container).offset().top,i>=e(n).offset().top+o.threshold+e(n).height()},e.leftofbegin=function(n,o){var i;return i=void 0===o.container||o.container===window?t.scrollLeft():e(o.container).offset().left,i>=e(n).offset().left+o.threshold+e(n).width()},e.inviewport=function(t,n){return!(e.rightoffold(t,n)||e.leftofbegin(t,n)||e.belowthefold(t,n)||e.abovethetop(t,n))},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})}),require.config({shim:{facebook:{exports:"FB"}},paths:{jquery:"//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min",facebook:"//connect.facebook.net/zh_TW/sdk",underscore:"//cdn.jsdelivr.net/underscorejs/1.8.3/underscore-min",waypoints:"//cdn.jsdelivr.net/jquery.waypoints/2.0.5/waypoints.min",remodal:"//cdn.jsdelivr.net/remodal/1.0.6/remodal.min"}}),define("all-2976283d",["jquery","underscore","lib/tracking","lib/pubsub","lib/jquery.lazyload"],function(e,t,n,o){var i=document,r=[];if(PAGEVARS=t.object(PAGEVARS),t.has(PAGEVARS,"pageId")&&PAGEVARS.pageId){var a="page/"+PAGEVARS.pageId;(!PAGEVARS.debug&&require.specified(a)||PAGEVARS.debug)&&r.push(a)}e(".widget").each(function(){if(this.id){var e="widget/"+this.id;(!PAGEVARS.debug&&require.specified(e)||PAGEVARS.debug)&&r.push(e)}}),r.length>0&&require(r),e(".lazy-img img").lazyload({threshold:300,load:function(){e(this).parents(".lazy-img").addClass("loaded")}}),e(i).ready(function(){!function(e,t,n,o){window.addthis_config={ui_language:"zh-tw"},window.addthis_share={passthrough:{facebook:{app_id:PAGEVARS.facebook.appId,redirect_uri:""}}},o=e.createElement(t),o.type="text/javascript",o.src=n,e.body.appendChild(o)}(i,"script","//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5773ce566b329fed&domready=1")}),e(i).ready(function(){require(["facebook"],function(t){t.init({appId:PAGEVARS.facebook.appId,version:"v2.6",xfbml:!0}),e("a.share_btn").bind("click",function(n){n.preventDefault(),t.ui({method:"share",href:e(this).data("url")},function(e){}),o.publish("share.facebook")}),t.Event.subscribe("edge.create",function(){o.publish("page.like")}),t.Event.subscribe("edge.remove",function(){o.publish("page.unlike")}),t.Event.subscribe("ad.loaded",function(e){}),t.Event.subscribe("ad.error",function(e,t,n){})}),n()})}),define("page/story",function(){}),function(e){"function"==typeof define&&define.amd?define("lib/jquery.copyright",["jquery"],e):e(jQuery)}(function(e){function t(t,i){this.element=t,this._defaults=o,this._name=n,this.options=e.extend({},o,i),this.action="string"==typeof i?i:"default",this.init()}var n="copyright",o={text:"<br>Original: "+window.location.href,minlength:0,processing:void 0};t.prototype.getSelectedText=function(){var e="";if(window.getSelection){var t=window.getSelection();if(t.rangeCount){for(var n=document.createElement("div"),o=0,i=t.rangeCount;i>o;++o)n.appendChild(t.getRangeAt(o).cloneContents());e=n.innerHTML}}else document.selection&&(e=document.selection.createRange().htmlText);return e},t.prototype.setSelectionRange=function(){if(window.getSelection){var e=document.createRange();e.selectNodeContents(this.div);var t=window.getSelection();t.removeAllRanges(),t.addRange(e)}else if(document.selection&&document.body.createTextRange){var n=document.body.createTextRange();n.moveToElementText(this.div),n.select()}},t.prototype.removeSelectionRange=function(){window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()},t.prototype.saveSelectionRange=function(){if(window.getSelection){if(sel=window.getSelection(),sel.getRangeAt&&sel.rangeCount)return sel.getRangeAt(0)}else if(document.selection)return document.selection.createRange();return null},t.prototype.restoreSelectionRange=function(){this.range?window.getSelection?(sel=window.getSelection(),sel.removeAllRanges(),sel.addRange(this.range)):document.selection&&this.range.select():this.it.removeSelectionRange()},t.prototype.copy=function(){var t=this,o=e("body"),i=t.getSelectedText(),r=t.saveSelectionRange(o[0]);i.length>t.options.minlength&&("function"==typeof t.options.processing&&(i=t.options.processing(i)),i+=t.options.text);var a=e("<div/>",{html:i,style:"width: 1px; height: 1px; overflow: hidden; position: absolute; top: -99999px; left: -99999px; opacity: 0.01"}).appendTo(o);return t.setSelectionRange.call({div:a[0]}),window.setTimeout(function(){return t.restoreSelectionRange.call({it:t,range:r}),a.remove(),e(t.element).trigger(n+"_AfterCopy")},0),e(t.element).trigger(n+"_BeforeCopy")},t.prototype.remove=function(){var t=this;e(t.element).off("copy")},t.prototype.start=function(){var t=this;e(t.element).on("copy",function(){t.copy()})},t.prototype.init=function(){switch(this.action){case"remove":return this.remove();default:return this.start()}},e.fn[n]=function(o){return this.each(function(){e.data(this,"plugin_"+n,new t(this,o))})}}),define("widget/content",["jquery","underscore","module","waypoints","lib/jquery.copyright","lib/pubsub","remodal"],function(e,t,n,o,i,r){var a=window,c=a.ga,s="send",l="event",u=document.location.href,d=n.id.split("/").pop(),f=e("#"+d);e(document).ready(function(){var n=e("div.popup"),o=n.length>0&&!a.localStorage.has_liked_page,i=t.has(PAGEVARS,"shortenUrl")?PAGEVARS.shortenUrl:document.location.href;o&&(n=n.remodal({closeOnOutsideClick:!1}),e(document).on("opened",".remodal",function(){c(s,l,"Popup","Open",u)}).on("closed",".remodal",function(e){switch(e.reason){case"cancellation":a.localStorage.has_liked_page=!0,c(s,l,"Popup","Cancel",u);break;case"confirmation":a.localStorage.has_liked_page=!0;break;default:c(s,l,"Popup","Close",u)}}),r.subscribe("page.like",function(){n.close("confirmation")}),e(".call-to-action span",f).waypoint(function(e){n.open()},{offset:function(){return e.waypoints("viewportHeight")-e(this).outerHeight()-100},triggerOnce:!0})),e(document).copyright({text:'<br /><br />原文網址：<a href="'+i+'">'+i+"</a>",minlength:30}).bind("copyright_AfterCopy",function(){c("send","event","Story","Copy")})})});